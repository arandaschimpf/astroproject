---
const { taskDescription, index } = Astro.props;
---

<div
  class="flex items-center gap-2 h-12 border-b bg-white border-hint pl-4 last-of-type:border-b-0"
>
  <input
    type="checkbox"
    id=`checkbox${index}`
    class="flex items-center justify-center relative peer shrink-0
    appearance-none w-5 h-5 border-[.75px] border-hint rounded-full bg-white"
  />
  <svg
    class="absolute w-5 h-5 p-[.18rem] mt-0.5 text-selected
      max-w-0 peer-checked:max-w-5 pointer-events-none peer-checked:transition-all peer-checked:duration-300"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 24 24"
    fill="none"
    stroke="currentColor"
    stroke-width="2"
    stroke-linecap="square"
    stroke-linejoin="miter"
  >
    <polyline points="20 6 9 17 4 12"></polyline>
  </svg>
  <div class="flex items-center justify-center bg-white h-full">
    <div
      class="flex mix-blend-difference bg-negativeHint h-0 transition-all duration-200 translate-y-[2px]"
      id=`strikethrough${index}`
    >
      <label id=`label${index}`
        class="flex items-center text-negativeGeneral mix-blend-difference text-xl translate-y-[-2px]"
        >{taskDescription}</label
      >
    </div>
  </div>
</div>

<script define:vars={{ index }}>
  const checkbox = document.getElementById(`checkbox${index}`);
  const label = document.getElementById(`label${index}`)
  const strikethrough = document.getElementById(`strikethrough${index}`)

  checkbox.addEventListener("change", () => {
    if (checkbox.checked) {
      console.log()
      strikethrough.style.height = '1px'
      label.style.color = '#2f2f2f'
    }
    else {
      strikethrough.style.height = '0'
      label.style.color = '#d8dbdb'
    }
  });
</script>